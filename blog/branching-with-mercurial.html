<!DOCTYPE html>
<html lang="english">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Branching with Mercurial</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="/blog/" rel="canonical" />

  <!-- Feed -->

  <link href="/blog/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="/blog/theme/css/code_blocks/github.css" rel="stylesheet">

    <!-- CSS specified by the user -->


    <link href="/blog/../static/css/blog.css" type="text/css" rel="stylesheet" />

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


  <link href="/blog/branching-with-mercurial.html" rel="canonical" />

    <meta name="description" content="This is a simple guide on how to do simple branching operations in Mercurial. First of all, let's comment the two different options for...">

    <meta name="author" content="Marc">





<!-- Open Graph -->
<meta property="og:site_name" content="datapythonista blog"/>
<meta property="og:title" content="Branching with Mercurial"/>
<meta property="og:description" content="This is a simple guide on how to do simple branching operations in Mercurial. First of all, let's comment the two different options for..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/blog/branching-with-mercurial.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2010-12-25 08:53:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/blog/author/marc.html">
<meta property="article:section" content="misc"/>
<meta property="og:image" content="/blog/../static/img/bg.jpg">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Branching with Mercurial",
  "headline": "Branching with Mercurial",
  "datePublished": "2010-12-25 08:53:00+00:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Marc",
    "url": "/blog/author/marc.html"
  },
  "image": "/blog/../static/img/bg.jpg",
  "url": "/blog/branching-with-mercurial.html",
  "description": "This is a simple guide on how to do simple branching operations in Mercurial. First of all, let's comment the two different options for..."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>


    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span class="blog-logo">
                <a href="/blog/"><img src="../static/img/profile.png" alt="Blog Logo" /></a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Branching with Mercurial</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="/blog/author/marc.html">Marc</a>
            | <time datetime="Sat 25 December 2010">Sat 25 December 2010</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('/blog/../static/img/bg.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <p>This is a simple guide on how to do simple branching operations in Mercurial.</p>
<p>First of all, let's comment the two different options for branching on Mercurial, and in most distributes source control systems.</p>
<p>First option is to create a clone of the original repository to create a branch. This option can be simpler for the user, which has different directories for every branch, and there are not special operations to switch from one branch to another. Another advantage is that branches can be safely switched when some changes are not yet commited, as every branch is in a different directory.</p>
<p>The second option would be to use Mercurial branching commands, and to keep all branches in the same repository. The main advantage of doing this, is that branches can be distributed when using push and pull operations. This is very important, if different programmers need to work with different branches, or if you want to replicate all branches when synchronizing your code with for example <a href="http://code.google.com/">Google code</a> or <a href="https://bitbucket.org/">Bitbucket</a>.</p>
<p>This second options is the one I'll cover in this simple guide.</p>
<p>Imagine we have a started repository, with some code, and we never used branching before.</p>
<p>If we perform:</p>
<p><code></p>
<h1>hg branches</h1>
<p>default                       69:3f5490390a0b
</code></p>
<p>we can see that we already have a branch named default, that is the one that has all our changesets and code.</p>
<p>Now we want to start working on a new version of our application, but we want to be able to do bugfixing to the application we already deployed. We can do it, creating a new branch on our repository.</p>
<p>Look at this example that creates a new branch named newversion, and we create a new file named newfile on it.</p>
<p><code></p>
<h1>hg branch newversion</h1>
<h1>touch newfile</h1>
<h1>hg add newfile</h1>
<h1>hg commit -m "commit on the new branch newversion"</h1>
<p></code></p>
<p>After this, if we check for the branches again, we'll have this:</p>
<p><code></p>
<h1>hg branches</h1>
<p>newversion                    70:720062b481d7
default                       69:3f5490390a0b (inactive)
</code></p>
<p>After working on the new branch, we find a bug on the deployed version, and we want to fix it on the version that is deployed. So we have to switch to the default branch to see the content of this branch in our repository directory. We can get it by simply typing:</p>
<p><code></p>
<h1>hg update default</h1>
<h1>&gt; bugfixedfile</h1>
<h1>hg add bugfixedfile</h1>
<h1>hg commit -m "bug fixed in default branch"</h1>
<p></code></p>
<p>NOTE, that we shouldn't have files that are not under the control version system, and that are specific to a branch in the code, as Mercurial will keep those files on the new branch after switching. We can use the option -C if the files are temporary and we want to clear them.</p>
<p>To know the current branch, we can use branch command with no parameters:</p>
<p><code></p>
<h1>hg branch</h1>
<p>default
</code></p>
<p>After fixing the bug in the default branch, we'll probably want to fix it in the new version too, so we'll proceed by:</p>
<p><code></p>
<h1>hg update newversion</h1>
<h1>hg merge default</h1>
<h1>hg commit -m "merged from branch default"</h1>
<p></code></p>
<p>After the new version is ready to be deployed, we'll probably want to merge it back to default, so default will go on being the deployed version. It's recommended to have all changes to the default branch merged to the new version branch, before merging it back to default.</p>
<p><code></p>
<h1>hg update newversion</h1>
<h1>hg merge default</h1>
<h1>hg commit -m "merged from branch default"</h1>
<h1>hg update default</h1>
<h1>hg merge newversion</h1>
<h1>hg commit -m "merged branch newversion into default"</h1>
<p></code></p>
<p>Finally, the last thing we would want to do is to close the branch where we developed the new version, as further changes to this version will be made to the default branch. It's as simple as:</p>
<p><code></p>
<h1>hg update newversion</h1>
<h1>hg commit --close-branch -m "closing branch newversion after being merged to default"</h1>
<p></code></p>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Branching with Mercurial&amp;url=/blog/branching-with-mercurial.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=/blog/branching-with-mercurial.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=/blog/branching-with-mercurial.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>


                <div class="clear"></div>


                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="/blog/theme/js/script.js"></script>

    <!-- Script specified by the user -->
    <script type="text/javascript"  src="/blog/../static/js/blog.js"></script>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1635939-25"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-1635939-25', { 'anonymize_ip': true });
    </script>
</body>
</html>