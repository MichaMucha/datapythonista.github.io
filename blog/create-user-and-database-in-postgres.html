<!DOCTYPE html>
<html lang="en">
<head>
          <title>datapythonista blog - Create user and database in Postgres</title>
        <meta charset="utf-8" />
        <link href="https://datapythonista.github.io/blog/atom.xml" type="application/atom+xml" rel="alternate" title="datapythonista blog Full Atom Feed" />





</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://datapythonista.github.io/blog/">datapythonista blog <strong>about me</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li class="active"><a href="https://datapythonista.github.io/blog/category/misc.html">misc</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://datapythonista.github.io/blog/create-user-and-database-in-postgres.html" rel="bookmark"
         title="Permalink to Create user and database in Postgres">Create user and database in Postgres</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2011-06-27T13:00:00+01:00">
      Mon 27 June 2011
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://datapythonista.github.io/blog/author/marc.html">Marc</a>
    </address>
    <div class="category">
        Category: <a href="https://datapythonista.github.io/blog/category/misc.html">misc</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>While I love Postgres, I get some problems every time I want to do the simple operation of creating a database with an associated user if it's been a while since the last time I did it.</p>
<p>There are several posts on the Internet about Postgres authentication, but I couldn't find any explaining exactly what I wanted to know, so here is mine.</p>
<p>This has been tested on <strong>Debian 6</strong> and <strong>PostgreSQL 8.4</strong>.</p>
<ol>
<li>Install the PostgreSQL server (obvious)</li>
<li>Create the user:
<code>
$ sudo -u postgres createuser -D -A -P <my-user>
</code></li>
<li>Create the database
<code>
$ sudo -u postgres createdb -O <my-user> <my-database>
</code></li>
<li>Edit /etc/postgresql/8.4/main/pg_hba.conf
<code></li>
</ol>
<h1>Put your actual configuration here</h1>
<p>local   all         all         password
host    all         all         127.0.0.1/32          password
</code>
<strong>NOTE:</strong> Make sure that your settings are placed after the comment saying where your configurations go. If you place them at the end, the default ones will be used, and you'll see this error when logging in:
<code>
psql: FATAL:  Ident authentication failed for user "<my-user>"
</code></p>
<p>Actually, you'll probably want to customize the settings you want to use. My settings allow logging in from localhost using unencrypted password, but may be you want to access from another host, only grant access to some users or some databases, or use another authentication methods, so I would recommend you reading the <a href="http://developer.postgresql.org/pgdocs/postgres/auth-pg-hba-conf.html">pg_hda.conf reference</a>.</p>
<p>Finally, you'll be able to access by:
<code>
$ psql -U <my-user> -W
</code></p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>